<html ng-app="fileDownload">
	<head>
		<title>File Uploading Form</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
		
		<link href="/css/main.css" rel="stylesheet">
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.11/angular.js"></script>
		<script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.14.3.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular-animate.js"></script>
		<script src="/js/app.js"></script>
		<script src="/js/jquery.js"></script>
	</head>
	<body ng-controller="FileCtrl">
		<div class="main-content">
			<h3>檔案上傳</h3>
			<uib-tabset justified="true">
				<uib-tab select="switchTab('android')">
					<uib-tab-heading>
						<i class="fa fa-android fa-2x" style="color:green"></i>
						<label><h4>Android</h4></label>
					</uib-tab-heading>

					<div class="file-content">
						<table>
						    <tr>
							  	<th class="col-xs-1"
							  		ng-click="order('version')">
							  		版本號碼
							  		<span class="sortorder" ng-show="predicate === 'version'" ng-class="{reverse:reverse}"></span>
							  	</th>
							  	<th class="col-xs-1"
							  		ng-click="order('env')">環境
							  		<span class="sortorder" ng-show="predicate === 'env'" ng-class="{reverse:reverse}"></span>
							  	</th>
							  	<th class="col-xs-1"
							  		ng-click="order('create_time')">時間
							  		<span class="sortorder" ng-show="predicate === 'create_time'" ng-class="{reverse:reverse}"></span>
							  	</th>
							  	<th class="col-xs-1 intro">簡介</th>
							  	<th class="col-xs-1 download_icon">下載</th>
							  	<th class="col-xs-1 delete_icon">刪除</th>
							</tr>
							<tr  class="file-list" ng-repeat="file in android_list | orderBy:predicate:reverse">
						        <td>
						        	<i class="fa fa-columns fa-1x">
						       		{{file.version}}
						       	</td>
						        <td>{{file.env}}</td>
						        <td>{{file.create_time}}</td>
						        <td class="intro">{{file.intro}}</td>
						        <td class="download_icon">
						       		<span  ng-click="downloadFile(file.download_url)">
										<i class="fa fa-download fa-2x"></i>
									</span>
								</td>
								<td class="delete_icon">
						       		<span ng-click="deleteFile(file.id, 'ipa')">
										<i class="fa fa-trash-o fa-2x"></i>
									</span>
								</td>
						    </tr>
					  	</table>
					</div>
				</uib-tab>
			    <uib-tab select="switchTab('ios')">
			    	<uib-tab-heading>
						<i class="fa fa-apple fa-2x"></i>
						<label><h4>IOS</h4></label>
					</uib-tab-heading>

			    	<div class="file-content">
						<table>
						    <tr>
							  	<th class="col-xs-1"
							  		ng-click="order('version')">
							  		版本號碼
							  		<span class="sortorder" ng-show="predicate === 'version'" ng-class="{reverse:reverse}"></span>
							  	</th>
							  	<th class="col-xs-1"
							  		ng-click="order('env')">環境
							  		<span class="sortorder" ng-show="predicate === 'env'" ng-class="{reverse:reverse}"></span>
							  	</th>
							  	<th class="col-xs-1"
							  		ng-click="order('create_time')">時間
							  		<span class="sortorder" ng-show="predicate === 'create_time'" ng-class="{reverse:reverse}"></span>
							  	</th>
							  	<th class="col-xs-1 intro">簡介</th>
							  	<th class="col-xs-1 download_icon">下載</th>
							  	<th class="col-xs-1 delete_icon">刪除</th>
							</tr>
							<tr  class="file-list" ng-repeat="file in ios_list | orderBy:predicate:reverse">
						        <td>
						        	<i class="fa fa-columns fa-1x">
						       		{{file.version}}
						       	</td>
						        <td>{{file.env}}</td>
						        <td>{{file.create_time}}</td>
						        <td class="intro">{{file.intro}}</td>
						        <td class="download_icon">
						       		<span  ng-click="downloadFile(file.download_url)">
										<i class="fa fa-download fa-2x"></i>
									</span>
								</td>
								<td class="delete_icon">
						       		<span ng-click="deleteFile(file.id, 'ipa')">
										<i class="fa fa-trash-o fa-2x"></i>
									</span>
								</td>
						    </tr>
					  	</table>
					</div>
			    </uib-tab>
			    <uib-tab select="switchTab('web')">
			    	<uib-tab-heading>
						<i class="fa fa-desktop fa-2x"></i>
						<label><h4>Web</h4></label>
					</uib-tab-heading>
			    	<div class="file-content">
						<table>
						    <tr>
							  	<th class="col-xs-1"
							  		ng-click="order('version')">
							  		版本號碼
							  		<span class="sortorder" ng-show="predicate === 'version'" ng-class="{reverse:reverse}"></span>
							  	</th>
							  	<th class="col-xs-1"
							  		ng-click="order('env')">環境
							  		<span class="sortorder" ng-show="predicate === 'env'" ng-class="{reverse:reverse}"></span>
							  	</th>
							  	<th class="col-xs-1"
							  		ng-click="order('create_time')">時間
							  		<span class="sortorder" ng-show="predicate === 'create_time'" ng-class="{reverse:reverse}"></span>
							  	</th>
							  	<th class="col-xs-1 intro">簡介</th>
							  	<th class="col-xs-1 download_icon">下載</th>
							  	<th class="col-xs-1 delete_icon">刪除</th>
							</tr>
							<tr  class="file-list" ng-repeat="file in web_list | orderBy:predicate:reverse">
						        <td>
						        	<i class="fa fa-columns fa-1x">
						       		{{file.version}}
						       	</td>
						        <td>{{file.env}}</td>
						        <td>{{file.create_time}}</td>
						        <td class="intro">{{file.intro}}</td>
						        <td class="download_icon">
						       		<span  ng-click="downloadFile(file.download_url)">
										<i class="fa fa-download fa-2x"></i>
									</span>
								</td>
								<td class="delete_icon">
						       		<span ng-click="deleteFile(file.id, 'ipa')">
										<i class="fa fa-trash-o fa-2x"></i>
									</span>
								</td>
						    </tr>
					  	</table>
					</div>
			    </uib-tab>
			</uib-tabset>

			<!-- <span id="add-file-button" class="btn-success btn" ng-show="upload_status"
				ng-click="showUploadForm()" >
				<i class="glypchicon glyphicon-plus"></i>
				<span>新增檔案</span> 
			</span> -->
			<div id="upload-content">
				<form name="uploadForm"> 
					<div class="col-xs-12 input-field">
						<div class="col-xs-3">
							<input type="text" class="form-control" ng-model="upload.env" placeholder="請輸入環境 (AWS, QA, etc...)" required/>
						</div>
					</div>
					<div class="col-xs-12 input-field">
						<div class="col-xs-3">
							<input type="text" class="form-control" ng-model="upload.version" placeholder="版號限定四位數字 ex：1.0.0.0" 
							ng-blur="checkFormat()" 
							required/>
							<span class="error" ng-show="format_err">格式錯誤</span>
						</div>
					</div>
			
					<div class="col-xs-12 input-field">
						<div class="col-xs-3">
							<input type="text" class="form-control" ng-model="upload.intro" placeholder="簡介"/>
						</div>
					</div>
					<div class="col-xs-12 input-field">
						<div class="col-xs-3">
							<span class="btn file-input">
								<span>{{input_file_hint}}</span>
									<input type="file" class="form-control" file-model="upload.file" onchange="angular.element(this).scope().changeUploadFile(this)" accept="{{accept_format}}" required/>
								<span class='file_name'>{{file_name}}</span>
							</span>
						</div>
					</div>
		
					<button class="btn-primary btn btn-upload" 
						ng-click="uploadSubmit(uploadForm.$valid, $event)">
						上傳
					</button>

					<section class="progress-bar" ng-show="progressVisible">
		        		<div class="frame">
			        		<div class="progress"></div>
			        		<div class="text">0%</div>
		        		</div>
		        	</section>
					
				</form>
			</div>
		</div>		
	</body>
</html>
